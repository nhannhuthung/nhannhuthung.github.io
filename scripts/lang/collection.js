const fixed_trans = {
    en: {
        home: `Home`,
        collection: `Collection`,
        about: `About`,
        contact: `Contact`,
        search_placeholder: `Enter page name...`,
        top_btn: `Top`,
        top_title: `Go to top`,
    },
    vi: {
        home: `Trang Ch·ªß`,
        collection: `B·ªô S∆∞u T·∫≠p`,
        about: `Gi·ªõi Thi·ªáu`,
        contact: `Li√™n H·ªá`,
        search_placeholder: `Nh·∫≠p t√™n trang...`,
        top_btn: `ƒê·∫ßu`,
        top_title: `Quay l·∫°i ƒë·∫ßu trang`,
    }
};

const main_trans = {
    en: {
        acknowledge: `Acknowledgment`,
        acknowledge_para: `Welcome to my online money gallary! I would like to express my gratitude to everyone who has contributed to my collection. It truly wouldn't be as complete and meaningful without each of you. Your support and contributions have made all the difference.`,

        remark: `Remark`,
        remark_para_1: `I started my collection with only coins and I continue collecting them until now. However, since there are too many - more than 650 coins, I couldn't put all of them here.`,
        remark_para_2: `A few highlights about my coin collection:`,
        remark_subpara_1: `<span>&#9757;</span> There are around 60 regions, including no longer exsited regions (Yugoslavia, Czechslovakia, French Indochina, etc.).`,
        remark_subpara_2: `<span>&#9996;</span> The oldest coins I own are American 1-dollar (1881) and French Indochinese 1-piastre (1902).`,
        remark_para_3: `My collection is expanding with banknotes. Right now, I prefer collecting banknotes over coins because they are lighter, neater, and basically have higher value. üòÅ`,

        last_update: `Last Updated:`,

        highlight: `Highlight`,
        banknote: `Banknote`,
        norway: `Norway`,
        hong_kong: `Hong Kong`,
        australia: `Australia`,
        south_korea: `South Korea`,
        coin: `Coin`,
        usa_coin: `USA ~ 1881-O ~ 1 Dollar`,
        indochina_coin: `Indochina ~ 1902 ~ 1 Piastre`,
        canada_coin: `Canada ~ 1967 ~ 1 Dollar`,
    },
    vi: {
        acknowledge: `L·ªùi C·∫£m ∆†n`,
        acknowledge_para: `Ch√†o m·ª´ng ƒë·∫øn v·ªõi n∆°i tr∆∞ng b√†y b·ªô s∆∞u t·∫≠p ti·ªÅn online c·ªßa m√¨nh! M√¨nh xin b√†y t·ªè l√≤ng bi·∫øt ∆°n ƒë·∫øn m·ªçi ng∆∞·ªùi ƒë√£ ƒë√≥ng g√≥p v√†o b·ªô s∆∞u t·∫≠p c·ªßa m√¨nh. N·∫øu kh√¥ng c√≥ m·ªçi ng∆∞·ªùi, b·ªô s∆∞u t·∫≠p s·∫Ω kh√¥ng th·ªÉ ho√†n thi·ªán v√† √Ω nghƒ©a nh∆∞ b√¢y gi·ªù. M√¨nh r·∫•t bi·∫øt ∆°n s·ª± ·ªßng h·ªô v√† ƒë√≥ng g√≥p c·ªßa m·ªçi ng∆∞·ªùi.`,

        remark: `T·ªïng Quan`,
        remark_para_1: `M√¨nh b·∫Øt ƒë·∫ßu b·ªô s∆∞u t·∫≠p ch·ªâ v·ªõi nh·ªØng ƒë·ªìng xu v√† v·∫´n ti·∫øp t·ª•c s∆∞u t·∫ßm cho ƒë·∫øn b√¢y gi·ªù. Tuy nhi√™n, v√¨ s·ªë l∆∞·ª£ng qu√° nhi·ªÅu ‚Äì h∆°n 650 ƒë·ªìng xu, m√¨nh kh√¥ng th·ªÉ ƒë∆∞a t·∫•t c·∫£ l√™n ƒë√¢y.`,
        remark_para_2: `M·ªôt v√†i ti√™u ƒëi·ªÉm v·ªÅ b·ªô s∆∞u t·∫≠p ti·ªÅn xu c·ªßa m√¨nh:`,
        remark_subpara_1: `<span>&#9757;</span> C√≥ kho·∫£ng 60 khu v·ª±c, bao g·ªìm nh·ªØng khu v·ª±c kh√¥ng c√≤n t·ªìn t·∫°i (Nam T∆∞, Ti·ªáp Kh·∫Øc, Li√™n Bang ƒê√¥ng D∆∞∆°ng, ...).`,
        remark_subpara_2: `<span>&#9996;</span> ƒê·ªìng ti·ªÅn c·ªï nh·∫•t m√† m√¨nh c√≥ bao g·ªìm ƒë·ªìng 1 ƒë√¥ la M·ªπ (1881) v√† ƒë·ªìng 1 piastre ƒê√¥ng D∆∞∆°ng (1902).`,
        remark_para_3: `M√¨nh c≈©ng m·ªü r·ªông b·ªô s∆∞u t·∫≠p v·ªõi ti·ªÅn gi·∫•y. Hi·ªán t·∫°i, m√¨nh t·∫≠p trung v√†o s∆∞u t·∫ßm ti·ªÅn gi·∫•y nhi·ªÅu h∆°n ti·ªÅn xu t·∫°i v√¨ n√≥ nh·∫π, g·ªçn v√† c∆° b·∫£n ch√∫ng c√≥ gi√° tr·ªã cao h∆°n. üòÅ`,

        last_update: `C·∫≠p Nh·∫≠t L·∫ßn Cu·ªëi:`,

        highlight: `N·ªïi B·∫≠t`,
        banknote: `Ti·ªÅn Gi·∫•y`,
        norway: `Na Uy`,
        hong_kong: `H·ªìng K√¥ng`,
        australia: `√öc`,
        coin: `Ti·ªÅn Xu`,
        usa_coin: `M·ªπ ~ 1881-O ~ 1 ƒê√¥ La`,
        indochina_coin: `ƒê√¥ng D∆∞∆°ng ~ 1902 ~ 1 Piastre`,
        canada_coin: `Canada ~ 1967 ~ 1 ƒê√¥ La`,
    }
};

const countries = {
    "americas": {
        "name": { "en": "Americas", "vi": "Ch√¢u M·ªπ" },
        "regions": {
            "north-america": {
                "name": { "en": "North America", "vi": "B·∫Øc M·ªπ" },
                "countries": [
                    { "en": "Canada", "vi": "Canada", "url": "collection/canada.html" },
                    { "en": "Mexico", "vi": "Mexico", "url": "collection/mexico.html" },
                    { "en": "United States", "vi": "Hoa K·ª≥", "url": "collection/usa.html" },
                ]
            },
            "central-america": {
                "name": { "en": "Central America", "vi": "Trung M·ªπ" },
                "countries": [
                    { "en": "Costa Rica", "vi": "Costa Rica", "url": "collection/costa-rica.html" },
                ]
            },
            "south-america": {
                "name": { "en": "South America", "vi": "Nam M·ªπ" },
                "countries": [
                    { "en": "Colombia", "vi": "Colombia", "url": "collection/colombia.html" },
                    { "en": "Venezuela", "vi": "Venezuela", "url": "collection/venezuela.html" },
                ]
            },
        }
    },
    "africa": {
        "name": { "en": "Africa", "vi": "Ch√¢u Phi" },
        "regions": {
            "north-africa": {
                "name": { "en": "North Africa", "vi": "B·∫Øc Phi" },
                "countries": [
                    { "en": "Egypt", "vi": "Ai C·∫≠p", "url": "collection/egypt.html" },
                ]
            },
            "west-africa": {
                "name": { "en": "West Africa", "vi": "T√¢y Phi" },
                "countries": [
                    { "en": "Ghana", "vi": "Ghana", "url": "collection/ghana.html" },
                    { "en": "Guinea", "vi": "Guinea", "url": "collection/guinea.html" },
                    { "en": "West African Economic And Monetary Union", "vi": "Li√™n Minh Kinh T·∫ø V√† Ti·ªÅn T·ªá T√¢y Phi", "url": "collection/uemoa.html" },
                ]
            },
            "central-africa": {
                "name": { "en": "Central Africa", "vi": "Trung Phi" },
                "countries": [
                    { "en": "Democratic Republic of the Congo", "vi": "C·ªông H√≤a D√¢n Ch·ªß Congo", "url": "collection/drc.html" },
                ]
            },
            "east-africa": {
                "name": { "en": "East Africa", "vi": "ƒê√¥ng Phi" },
                "countries": [
                    { "en": "Ethiopia", "vi": "Ethiopia", "url": "collection/ethiopia.html" },
                    { "en": "Kenya", "vi": "Kenya", "url": "collection/kenya.html" },
                    { "en": "Malawi", "vi": "Malawi", "url": "collection/malawi.html"},
                    { "en": "Mauritius", "vi": "Mauritius", "url": "collection/mauritius.html"},
                    { "en": "Rwanda", "vi": "Rwanda", "url": "collection/rwanda.html"},
                    { "en": "Somalia", "vi": "Somalia", "url": "collection/somalia.html"},
                ]
            },
            "southern-africa": {
                "name": { "en": "Southern Africa", "vi": "Nam Phi" },
                "countries": [
                    { "en": "Zambia", "vi": "Zambia", "url": "collection/zambia.html" },
                ]
            },
        }
    },
    "europe": {
        "name": { "en": "Europe", "vi": "Ch√¢u √Çu" },
        "eu": { "en": "European Union", "vi": "Li√™n Minh ch√¢u √Çu", "url": "collection/eu.html" },
        "regions": {
            "northern-europe": {
                "name": { "en": "Northern Europe", "vi": "B·∫Øc √Çu" },
                "countries": [
                    { "en": "England", "vi": "Anh", "url": "collection/england.html" },
                    { "en": "Ireland", "vi": "Ireland", "url": "collection/ireland.html" },
                    { "en": "Norway", "vi": "Na Uy", "url": "collection/norway.html" },
                    { "en": "Scotland", "vi": "Scotland", "url": "collection/scotland.html" },
                ]
            },
            "western-europe": {
                "name": {"en": "Western Europe", "vi": "T√¢y √Çu"},
                "countries": [
                    { "en": "France", "vi": "Ph√°p", "url": "collection/france.html"},
                ]
            },
            "eastern-europe": {
                "name": { "en": "Eastern Europe", "vi": "ƒê√¥ng √Çu" },
                "countries": [
                    { "en": "Belarus", "vi": "Belarus", "url": "collection/belarus.html" },
                    { "en": "Moldova", "vi": "Moldova", "url": "collection/moldova.html" },
                    { "en": "Russia", "vi": "Nga", "url": "collection/russia.html" },
                    { "en": "Transnistria", "vi": "Transnistria", "url": "collection/transnistria.html" },
                    { "en": "Ukraine", "vi": "Ukraine", "url": "collection/ukraine.html" },
                ]
            },
            "southern-europe": {
                "name": { "en": "Southern Europe", "vi": "Nam √Çu" },
                "countries": [
                    { "en": "Croatia", "vi": "Croatia", "url": "collection/croatia.html" },
                    { "en": "Italy", "vi": "√ù", "url": "collection/italy.html" },
                ]
            },
        }
    },
    "asia": {
        "name": { "en": "Asia", "vi": "Ch√¢u √Å"},
        "regions": {
            "mid-east-asia": {
                "name": { "en": "Middle East Asia", "vi": "Trung ƒê√¥ng" },
                "countries": [
                    { "en": "Iran", "vi": "Iran", "url": "collection/iran.html" },
                    { "en": "Israel", "vi": "Israel", "url": "collection/israel.html" },
                    { "en": "Lebanon", "vi": "Liban", "url": "collection/lebanon.html" },
                    { "en": "Oman", "vi": "Oman", "url": "collection/oman.html" },
                    { "en": "Saudi Arabia", "vi": "·∫¢ R·∫≠p X√™ √öt", "url": "collection/saudi-arabia.html" },
                    { "en": "Syria", "vi": "Syria", "url": "collection/syria.html" },
                    { "en": "Turkey", "vi": "Th·ªï Nhƒ© K·ª≥", "url": "collection/turkey.html" },
                ]
            },
            "central-asia": {
                "name": { "en": "Central Asia", "vi": "Trung √Å" },
                "countries": [
                    { "en": "Kyrgyzstan", "vi": "Kyrgyzstan", "url": "collection/kyrgyzstan.html" },
                    { "en": "Tajikistan", "vi": "Tajikistan", "url": "collection/tajikistan.html" },
                    { "en": "Turkmenistan", "vi": "Turkmenistan", "url": "collection/turkmenistan.html" },
                    { "en": "Uzbekistan", "vi": "Uzbekistan", "url": "collection/uzbekistan.html" },
                ]
            },
            "south-asia": {
                "name": { "en": "South Asia", "vi": "Nam √Å" },
                "countries": [
                    { "en": "Bangladesh", "vi": "Bangladesh", "url": "collection/bangladesh.html" },
                    { "en": "Bhutan", "vi": "Bhutan", "url": "collection/bhutan.html" },
                    { "en": "India", "vi": "·∫§n ƒê·ªô", "url": "collection/india.html" },
                    { "en": "Nepal", "vi": "Nepal", "url": "collection/nepal.html" },
                    { "en": "Pakistan", "vi": "Pakistan", "url": "collection/pakistan.html" },
                ]
            },
            "east-asia": {
                "name": { "en": "East Asia", "vi": "ƒê√¥ng √Å" },
                "countries": [
                    { "en": "China", "vi": "Trung Qu·ªëc", "url": "collection/china.html" },
                    { "en": "Hong Kong", "vi": "H·ªìng K√¥ng", "url": "collection/hong-kong.html" },
                    { "en": "Japan", "vi": "Nh·∫≠t B·∫£n", "url": "collection/japan.html" },
                    { "en": "Macau", "vi": "Ma Cao", "url": "collection/macau.html" },
                    { "en": "Mongolia", "vi": "M√¥ng C·ªï", "url": "collection/mongolia.html" },
                    { "en": "North Korea", "vi": "Tri·ªÅu Ti√™n", "url": "collection/north-korea.html" },
                    { "en": "South Korea", "vi": "H√†n Qu·ªëc", "url": "collection/south-korea.html" },
                    { "en": "Taiwan", "vi": "ƒê√†i Loan", "url": "collection/taiwan.html" },
                ]
            },
            "south-east-asia": {
                "name": { "en": "South East Asia", "vi": "ƒê√¥ng Nam √Å" },
                "countries": [
                    { "en": "Cambodia", "vi": "Campuchia", "url": "collection/cambodia.html" },
                    { "en": "Indonesia", "vi": "Indonesia", "url": "collection/indonesia.html" },
                    { "en": "Laos", "vi": "L√†o", "url": "collection/laos.html" },
                    { "en": "Malaysia", "vi": "Malaysia", "url": "collection/malaysia.html" },
                    { "en": "Myanmar", "vi": "Myanmar", "url": "collection/myanmar.html" },
                    { "en": "Singapore", "vi": "Singapore", "url": "collection/singapore.html" },
                    { "en": "Thailand", "vi": "Th√°i Lan", "url": "collection/thailand.html" },
                    { "en": "Vietnam", "vi": "Vi·ªát Nam", "url": "collection/vietnam.html" },
                ]
            },
        }
    },
    "oceania": {
        "name": { "en": "Oceania", "vi": "Ch√¢u √öc" },
        "australia": { "en": "Australia", "vi": "√öc", "url": "collection/australia.html" },
    },
    "arctic": {
        "name": { "en": "Arctic", "vi": "B·∫Øc C·ª±c" },
        "arctic_territories": { "en": "Arctic Territories", "vi": "L√£nh Th·ªï B·∫Øc C·ª±c", "url": "collection/arctic-territories.html" },
    },
    "antartica": {
        "name": { "en": "Antarctica", "vi": "Nam C·ª±c" },
        "kerguelen_islands": { "en": "Kerguelen Islands", "vi": "Qu·∫ßn ƒê·∫£o Kerguelen", "url": "collection/kerguelen-islands.html" },
    },
};

let currentLang = localStorage.getItem('language') || "en"; // Default to English if no language is stored

function toggleLanguage() {
    currentLang = currentLang === "en" ? "vi" : "en"; // Toggle between English and Vietnamese
    localStorage.setItem('language', currentLang); // Save the current language in localStorage
    
    updatePageLanguage(currentLang);
    generateCountryList(currentLang)
}

function generateCountryList(currentLang) {
    let container = document.getElementById("country-list");
    container.innerHTML = "";  // Clear previous content

    Object.values(countries).forEach(continent => {
        // Create a container div for each continent
        let continentContainer = document.createElement("div");
        continentContainer.className = "container";

        // Generate continent title
        let continentTitle = document.createElement("h1");
        continentTitle.innerText = continent.name[currentLang];
        continentContainer.appendChild(continentTitle);

        // Handle special cases (European Union, Australia, Arctic Territories, Kerguelen Islands)
        if (continent.name.en === "Europe" && continent.eu) {
            let Div = document.createElement("div");
            Div.className = "category";
            let Item = document.createElement("div");
            Item.className = "category-item";
            Item.innerText = continent.eu[currentLang];
            Item.onclick = () => navigateTo(continent.eu.url);
            Div.appendChild(Item);
            continentContainer.appendChild(Div);
        }

        // Handle Oceania, Arctic, and Antarctica categories if they exist
        if (continent.name.en === "Oceania" && continent.australia) {
            let Div = document.createElement("div");
            Div.className = "category";
            let Item = document.createElement("div");
            Item.className = "category-item";
            Item.innerText = continent.australia[currentLang];
            Item.onclick = () => navigateTo(continent.australia.url);
            Div.appendChild(Item);
            continentContainer.appendChild(Div);
        }

        if (continent.name.en === "Arctic" && continent.arctic_territories) {
            let Div = document.createElement("div");
            Div.className = "category";
            let Item = document.createElement("div");
            Item.className = "category-item";
            Item.innerText = continent.arctic_territories[currentLang];
            Item.onclick = () => navigateTo(continent.arctic_territories.url);
            Div.appendChild(Item);
            continentContainer.appendChild(Div);
        }

        if (continent.name.en === "Antarctica" && continent.kerguelen_islands) {
            let Div = document.createElement("div");
            Div.className = "category";
            let Item = document.createElement("div");
            Item.className = "category-item";
            Item.innerText = continent.kerguelen_islands[currentLang];
            Item.onclick = () => navigateTo(continent.kerguelen_islands.url);
            Div.appendChild(Item);
            continentContainer.appendChild(Div);
        }

        // Handle regions within the continent
        if (continent.regions) {
            Object.values(continent.regions).forEach(region => {
                let regionTitle = document.createElement("h2");
                regionTitle.innerText = region.name[currentLang];
                continentContainer.appendChild(regionTitle);

                let categoryDiv = document.createElement("div");
                categoryDiv.className = "category";

                // Sort countries alphabetically based on selected language
                let countryList = [...region.countries].sort((a, b) => 
                    a[currentLang].localeCompare(b[currentLang])
                );

                countryList.forEach(country => {
                    let countryDiv = document.createElement("div");
                    countryDiv.className = "category-item";
                    countryDiv.innerText = country[currentLang];
                    countryDiv.onclick = () => navigateTo(country.url);
                    categoryDiv.appendChild(countryDiv);
                });

                continentContainer.appendChild(categoryDiv);
            });
        }

        // Append the continent container to the main container
        container.appendChild(continentContainer);
    });
}

function updatePageLanguage(currentLang) {
    const foundationToUpdate = [
        { id: "home-nav", key: "home" },
        { id: "collection-nav", key: "collection" },
        { id: "about-nav", key: "about" },
        { id: "contact-nav", key: "contact" },
        { id: "searchInput", key: "search_placeholder", attr: "placeholder" },
        { id: "top_btn", key: "top_btn"},
        { id: "top_btn", key: "top_title", attr: "title"}
    ];

    foundationToUpdate.forEach(({ id, key, attr }) => {
        const element = document.getElementById(id);
        if (element) {
            if (attr) {
                element.setAttribute(attr, fixed_trans[currentLang][key]);
            } else {
                element.textContent = fixed_trans[currentLang][key];
            }
        }
    });

    const contentsToUpdate = [
        { id: "acknowledge", key: "acknowledge" },
        { id: "acknowledge-para", key: "acknowledge_para" },

        { id: "remark", key: "remark" },
        { id: "remark-para-1", key: "remark_para_1" },
        { id: "remark-para-2", key: "remark_para_2" },
        { id: "remark-subpara-1", key: "remark_subpara_1" },
        { id: "remark-subpara-2", key: "remark_subpara_2" },
        { id: "remark-para-3", key: "remark_para_3" },

        { id: "last-update", key: "last_update" },

        { id: "highlight", key: "highlight" },
        { id: "banknote", key: "banknote" },
        { id: "norway", key: "norway" },
        { id: "hong-kong", key: "hong_kong" },
        { id: "australia", key: "australia" },
        { id: "coin", key: "coin" },
        { id: "usa-coin", key: "usa_coin" },
        { id: "indochina-coin", key: "indochina_coin" },
        { id: "canada-coin", key: "canada_coin" },
    ];

    contentsToUpdate.forEach(({ id, key }) => {
        document.getElementById(id).innerHTML = main_trans[currentLang][key];
    });
}

document.addEventListener("DOMContentLoaded", function() {
    updatePageLanguage(currentLang);
    generateCountryList(currentLang);
});